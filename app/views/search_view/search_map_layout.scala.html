@import model.event.Event
@(key:String)(eventList: List[Event])(userID: String)(userName: String)(implicit messages: Messages, request: RequestHeader)
<!DOCTYPE html>
<html>
    <fre>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="viewport" content="target-densitydpi=device-dpi, width=1024, maximum-scale=1.0, user-scalable=yes">
        <title>Nearby</title>
            <!-- jQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="@routes.Assets.at("/javascripts/jquery.validationEngine.js")" charset="utf-8"></script>
        <script src="@routes.Assets.at("/javascripts/jquery.validationEngine-ja.js")" charset="utf-8"></script>
        <link rel="stylesheet" href="@routes.Assets.at("/stylesheets/jquery.datetimepicker.css")">
        <link rel="stylesheet" href="@routes.Assets.at("/stylesheets/validationEngine.jquery.css")">
            <!-- GoogleMap API -->
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
            <!-- Bootstrap -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/js/bootstrap-datetimepicker.min.js"></script>
            <!-- Font Awesome -->
        <link rel="stylesheet" href="@routes.Assets.at("/stylesheets/vendor/font-awesome-4.7.0/css/font-awesome.min.css")">
            <!-- My javascript & css files -->
        <script src="@routes.Assets.at("/javascripts/master.js")" charset="utf-8"></script>
        <script src="@routes.Assets.at("/javascripts/nearby.js")" charset="utf-8"></script>
        <script src="@routes.Assets.at("/javascripts/jquery.easing.1.3.js")" charset="utf-8"></script>
        <link rel="stylesheet" href="@routes.Assets.at("/stylesheets/master.css")">
        <link rel="stylesheet" href="@routes.Assets.at("/stylesheets/nearby.css")">
        <link rel="stylesheet" href="@routes.Assets.at("/stylesheets/search_list_item_hr.css")">
        <script>
                $(function () {

                    function fetchPage(page,key) {
                        $.ajax({
                            url:'/event/findoffset?keyword=' + key +'&limit=10&offset=' + page * 10,
                            type:'GET',
                        }).done(function(html){
                            $(html).appendTo(cardList);
                            history.pushState('','','/event?keyword=' + key + '&limit=10&offset=' + page * 10);
                        })
                    }

                    function addPage(page, key) {
                        fetchPage(page, key);
                        // addPaginationPage(page);
                    }

                    const cardList = document.getElementById('card-list');
                    // const cardList = document.getElementById('article-list-pagination');
                    let page = 0;


                    $(".side-nav.visible").on("scroll", function () {
                        var inHeight = $(".card-list").innerHeight();
                        var outHeight = $(".side-nav").innerHeight();
                        var outerBottom = inHeight - outHeight;
                        if (outerBottom <= $(".side-nav").scrollTop()) {
                            addPage(++page, "@key");
                        }
                    });
                });
        </script>
    </head>
</fre>

    <body>
            <!-- App bar START -->
        @views.html.secured.memberPageHeader(userID)(userName)
            <!-- App bar END -->
        <main>
            <div id="night-mode"></div>
                <!-- GoogleMap -->
            <div id="map"></div>
                <!-- Serch box START -->
                <!-- Search box END -->
                <!-- Side nav START -->
            <div class="side-nav visible">
                    <!-- <div class="search-box-btn menu">
                <i class="fa fa-arrow-left" aria-hidden="true"></i>
            </div> -->
                    <!-- Event header image -->
<div class="test2">
                <div class="side-nav-contents">
                    <div class="detail-box" style="display: none;">
                    </div>
                    <div class="event-list">
                        <div class="search-keyword">検索キーワード:@key</div>
                        <div class="search-filters">
                            <div class="dropdown">
                                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="true">
                                    category
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                    <li><a href="#">Action</a></li>
                                    <li><a href="#">Another action</a></li>
                                    <li><a href="#">Something else here</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="#">Separated link</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-list" id="card-list">
                        @for(event <- eventList) {
                            @views.html.search_view.search_list_item_hr(event)
                        }
                            <footer class="test">
                                <hr style="border-top: 1px solid #8e8e8e;">
                                <img src="/assets//images/sample/sample1.jpg" alt="">
                            </footer>
                        </div>
                    </div>
                </div>
                    <!-- Side nav END -->
            </div>
            </div>

        </main>
    </body>

</html>